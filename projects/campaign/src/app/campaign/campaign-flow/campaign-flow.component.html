<div class="page-header">
  <div class="box-layout">
    <div class="col-xs-5 col-sm-6 col-md-5 va-m">
      <div class="col-xs-2 text-right pull-left"></div>
    </div>
    <div class="col-xs-7 col-sm-6 col-md-12 va-m">
      <div class="toolbar text-right" id="toolbar">
        <div class="btn-group toolbar-standard hidden-xs hidden-sm">
          <div class="toolbox mr-4">
            <mat-button-toggle-group #group="matButtonToggleGroup">
              <mat-button-toggle
                value="center"
                aria-label="Text align center"
                mat-icon-button
                (click)="onPan()"
                aria-label="Pan"
              >
                <mat-icon>pan_tool</mat-icon>
              </mat-button-toggle>
              <mat-button-toggle
                value="left"
                aria-label="Text align left"
                (click)="onZoomIn()"
                aria-label="ZoomIn"
              >
                <mat-icon>zoom_in</mat-icon>
              </mat-button-toggle>
              <mat-button-toggle
                value="center"
                aria-label="Text align center"
                mat-icon-button
                (click)="onZoomOut()"
                aria-label="ZoomOut"
              >
                <mat-icon>zoom_out</mat-icon>
              </mat-button-toggle>
            </mat-button-toggle-group>
          </div>
          <!-- <button
              type="button"
              class="btn btn-outline-danger btn-cancel btn-copy"
              id="flow_buttons_cancel_toolbar"
              (click)="getList()"
            >
              <i class="fa fa-times text-danger"></i>
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-outline-success btn-apply btn-copy"
              id="flow_buttons_apply_toolbar"
              (click)="saveflow()"
            >
              <i class="fa fa-check text-success"></i>
              Apply
            </button> -->
        </div>
      </div>
    </div>
  </div>
</div>
<!-- {{ selected.event_type }} -->
<div #chart class="container container101">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    [attr.width]="WIDTH"
    [attr.height]="HEIGHT"
    [attr.viewBox]="viewBox"
    class="chart"
  >
    <g *ngFor="let e of CampaignChartElementList">
      <path
        *ngIf="e.connection && e.item.event_name"
        [attr.d]="e.connection"
        [style.stroke]="e.item.color"
        class="connection"
      />
      <a>
        <rect
          id="hideedit"
          class="item"
          [class.selected]="e.item.id === selected.id"
          [class.selectedMulti]="e.item.id == StoreResponse"
          *ngIf="e.item.event_name"
          [style.stroke]="e.item.color"
          [style.fill]="e.item.color"
          [style.fillOpacity]="1 / (e.item.event_order + 1)"
          [attr.x]="e.x - ELEMENT_WIDTH / 2"
          [attr.y]="e.y - ELEMENT_HEIGHT / 2"
          [attr.width]="ELEMENT_WIDTH + e.item.event_name.length"
          [attr.height]="ELEMENT_HEIGHT"
          rx="10"
          ry="10"
        ></rect>
      </a>
      <svg
        (click)="onClick(e.item, myAction, myCondition)"
        width="24"
        *ngIf="e.item.event_type != 'start' && e.item.event_name"
        height="20"
        [attr.x]="e.x + 40"
        [attr.y]="e.y - 27"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="12" cy="12" r="12" fill="#3F77B3" />

        <path
          d="M17.6569 6.34311C18.4379 7.12416 18.4379 8.39049 17.6569 9.17154L10.2704 16.558C9.95004 16.8784 9.54859 17.1057 9.10901 17.2156L6.81801 17.7883C6.45182 17.8799 6.12013 17.5482 6.21167 17.182L6.78442 14.891C6.89432 14.4514 7.12161 14.05 7.44201 13.7296L14.8285 6.34311C15.6095 5.56206 16.8759 5.56206 17.6569 6.34311ZM14.1213 8.46432L8.14912 14.4367C7.95688 14.6289 7.8205 14.8698 7.75457 15.1335L7.38393 16.6161L8.86648 16.2454C9.13022 16.1795 9.37109 16.0431 9.56333 15.8509L15.5353 9.87832L14.1213 8.46432ZM15.5356 7.05022L14.8283 7.75732L16.2423 9.17132L16.9498 8.46443C17.3403 8.07391 17.3403 7.44074 16.9498 7.05022C16.5593 6.65969 15.9261 6.65969 15.5356 7.05022Z"
          fill="#d5d5d5"
        />
      </svg>

      <svg
        (click)="onDelete(e.item.id)"
        width="24"
        height="20"
        *ngIf="e.item.event_type != 'start' && e.item.event_name"
        viewBox="0 0 24 24"
        [attr.x]="e.x + 70"
        [attr.y]="e.y - 27"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="12" cy="12" r="12" fill="#EA5D55" />
        <path
          d="M12.9403 12L17.1403 7.80667C17.2658 7.68113 17.3363 7.51087 17.3363 7.33333C17.3363 7.1558 17.2658 6.98554 17.1403 6.86C17.0148 6.73447 16.8445 6.66394 16.667 6.66394C16.4894 6.66394 16.3192 6.73447 16.1936 6.86L12.0003 11.06L7.80695 6.86C7.68142 6.73447 7.51115 6.66394 7.33362 6.66394C7.15608 6.66394 6.98582 6.73447 6.86028 6.86C6.73475 6.98554 6.66422 7.1558 6.66422 7.33333C6.66422 7.51087 6.73475 7.68113 6.86028 7.80667L11.0603 12L6.86028 16.1933C6.7978 16.2553 6.7482 16.329 6.71436 16.4103C6.68051 16.4915 6.66309 16.5787 6.66309 16.6667C6.66309 16.7547 6.68051 16.8418 6.71436 16.9231C6.7482 17.0043 6.7978 17.078 6.86028 17.14C6.92226 17.2025 6.99599 17.2521 7.07723 17.2859C7.15847 17.3198 7.24561 17.3372 7.33362 17.3372C7.42163 17.3372 7.50876 17.3198 7.59 17.2859C7.67124 17.2521 7.74498 17.2025 7.80695 17.14L12.0003 12.94L16.1936 17.14C16.2556 17.2025 16.3293 17.2521 16.4106 17.2859C16.4918 17.3198 16.5789 17.3372 16.667 17.3372C16.755 17.3372 16.8421 17.3198 16.9233 17.2859C17.0046 17.2521 17.0783 17.2025 17.1403 17.14C17.2028 17.078 17.2524 17.0043 17.2862 16.9231C17.3201 16.8418 17.3375 16.7547 17.3375 16.6667C17.3375 16.5787 17.3201 16.4915 17.2862 16.4103C17.2524 16.329 17.2028 16.2553 17.1403 16.1933L12.9403 12Z"
          fill="white"
        />
      </svg>

      <text
        [attr.x]="e.x + 10"
        [attr.y]="e.y + 5"
        class="item-text cursor"
        [attr.width]="ELEMENT_WIDTH"
        [attr.height]="ELEMENT_HEIGHT"
        style="font-size: 15px"
      >
        {{ e.item.event_name }}
      </text>

      <svg
        [attr.x]="e.x"
        [attr.y]="e.y + 10"
        class="chk cursor"
        *ngIf="e.item.event_name && e.item.channel_root_name !== 'JumpToEvent'"
        (click)="AddEvent(e.item)"
        width="24"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="12" cy="12" r="12" fill="#D5D5D5" />
        <path
          d="M15.544 13.36H12.44V16.656H10.832V13.36H7.744V11.896H10.832V8.616H12.44V11.896H15.544V13.36Z"
          fill="#444444"
        />
      </svg>

      <svg
        width="24"
        height="24"
        (click)="jumpnode(e.item)"
        [attr.x]="e.x"
        [attr.y]="e.y + 10"
        *ngIf="e.item.channel_root_name == 'JumpToEvent'"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="12" cy="12" r="12" fill="#D9D9D9" />
        <path
          d="M11.3103 18.0691C7.96414 18.0691 5.24138 15.3463 5.24138 12.0001C5.24138 8.65391 7.96414 5.93115 11.3103 5.93115C14.6566 5.93115 17.3793 8.65391 17.3793 12.0001C17.3793 12.1464 17.3212 12.2868 17.2177 12.3902C17.1142 12.4937 16.9739 12.5518 16.8276 12.5518C16.6813 12.5518 16.5409 12.4937 16.4375 12.3902C16.334 12.2868 16.2759 12.1464 16.2759 12.0001C16.2759 9.26191 14.0486 7.0346 11.3103 7.0346C8.57214 7.0346 6.34483 9.26191 6.34483 12.0001C6.34483 14.7383 8.57214 16.9656 11.3103 16.9656C12.6265 16.9616 13.888 16.4391 14.8215 15.5113C14.925 15.4078 15.0653 15.3497 15.2116 15.3497C15.3579 15.3497 15.4982 15.4078 15.6017 15.5113C15.7051 15.6147 15.7632 15.7551 15.7632 15.9014C15.7632 16.0477 15.7051 16.188 15.6017 16.2914C14.4609 17.4256 12.919 18.0643 11.3103 18.0691V18.0691Z"
          fill="#444444"
        />
        <path
          d="M15.675 10.8054H17.9796C18.0197 10.8053 18.0591 10.8158 18.0938 10.8359C18.1285 10.856 18.1572 10.885 18.1771 10.9198C18.1969 10.9547 18.2071 10.9942 18.2066 11.0343C18.2061 11.0744 18.195 11.1137 18.1743 11.148L17.0218 13.084C17.0018 13.1179 16.9733 13.146 16.9392 13.1654C16.905 13.1849 16.8664 13.1952 16.827 13.1952C16.7877 13.1952 16.7491 13.1849 16.7149 13.1654C16.6808 13.146 16.6523 13.1179 16.6323 13.084L15.4797 11.148C15.4594 11.1136 15.4486 11.0743 15.4483 11.0343C15.448 10.9943 15.4583 10.9549 15.4781 10.9202C15.498 10.8854 15.5266 10.8565 15.5612 10.8363C15.5957 10.8162 15.635 10.8055 15.675 10.8054V10.8054Z"
          fill="#444444"
        />
      </svg>
    </g>
  </svg>
</div>

<div class="modal" id="event-model" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="container">
        <div
          class="row"
          style="background-color: rgb(247, 247, 247); border-radius: 5px"
        >
          <div class="col-md-6" style="border-right: 1px solid gray">
            <div
              class="card mt-3"
              style="
                height: fit-content;
                background-color: #388e3c;
                color: #fff;
                border-radius: 4px;
                text-align: center;
                line-height: 40px;
                font-weight: bold;
              "
            >
              Condition
            </div>

            <div class="card-body" style="margin-top: 10px">
              <p class="blockquote mb-0" style="font-size: 14px">
                Navigate through the options and pinpoint the exact condition
                that will act as the catalyst for a cascade of actions. Your
                selection holds the power to shape the course of events.
              </p>
            </div>

            <div class="mb-3 text-center">
              <button
                type="button"
                class="ml-4 col-md-4 btn btn-sm btn-outline-warning"
                style="color: #388e3c; border-color: #388e3c; margin-top: 20px"
                (click)="AddnewEvent('condition', '#388E3C')"
                MatRaisedButton
                (click)="openDialog(myCondition)"
              >
                Select
              </button>
            </div>
          </div>

          <div class="col-md-6">
            <div
              class="card mt-3 hideit"
              style="
                height: fit-content;
                background-color: #4527a0;
                color: #fff;
                border-radius: 4px;
                text-align: center;
                line-height: 40px;
                font-weight: bold;
              "
            >
              Action
            </div>

            <div class="card-body" style="margin-top: 10px">
              <p class="blockquote mb-0" style="font-size: 14px">
                Casting your influence over the situation, pick an action that
                perfectly aligns with the presented condition. Your choice will
                guide the path forward, so select with purpose.
              </p>
            </div>

            <div class="mb-3 text-center">
              <button
                type="button"
                class="ml-4 col-md-4 btn btn-sm btn-outline-warning"
                style="color: #4527a0; border-color: #4527a0; margin-top: 20px"
                (click)="AddnewEvent('action', '#4527A0')"
                MatRaisedButton
                (click)="openDialog(myAction)"
              >
                Select
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #myAction>
  <mat-dialog-content class="">
    <div class="modal-dialog" role="document" style="width: 500px">
      <div class="modal-content">
        <div
          class="modal-header"
          style="background-color: #ebe3f8; height: 80px"
        >
          {{ campaign_id.id }}
          <div
            class="col-md-6 d-flex align-items-center justify-content-center"
          >
            <mat-form-field class="mt-3">
              <mat-label>Event Type</mat-label>
              <input
                type="text"
                autocomplete="off"
                name="type"
                matInput
                disabled
                [(ngModel)]="selected.event_type"
              />
            </mat-form-field>
          </div>

          <div
            class="col-md-6 d-flex align-items-center justify-content-center"
          >
            <mat-form-field class="mt-3 justify-content-center">
              <mat-label>Event Order</mat-label>
              <input
                type="text"
                autocomplete="off"
                class="rounded-circle"
                style="
                  position: absolute;
                  height: 22px;
                  width: 22px;
                  background-color: #a64eed;
                  border-radius: 45%;
                  text-align: center;
                  color: white;
                  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                  /* display: inline-block; */
                "
                name="event_order"
                disabled
                matInput
                [(ngModel)]="selected.event_order"
              />
            </mat-form-field>
          </div>
        </div>

        <div class="modal-body">
          <div
            class="container-fluid"
            style="padding-right: 0px; padding-left: 0px; margin-top: 15px"
          >
            <div class="row">
              <div class="col-md-6">
                <mat-form-field style="height: 75px;" >
                  <mat-label>Event name</mat-label>
                  <input
                    maxlength="18"
                    id="event_nameID"
                    type="text"
                    autocomplete="off"
                    name="event_name"
                    matInput
                    [(ngModel)]="selected.event_name"
                    required
                  />
                </mat-form-field>
              </div>

              <div class="col-md-6">
                <mat-form-field style="height: 75px">
                  <mat-label>Select Channel</mat-label>
                  <mat-select
                    [(ngModel)]="selected.channel_id"
                    (ngModelChange)="OnChannelChange()"
                    name="ChannelName"
                    matNativeControl
                  >
                    <mat-option
                      [value]="channel.id"
                      *ngFor="let channel of channelNames"
                    >
                      {{ channel.channel_name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-6">
                <mat-form-field style="height: 75px">
                  <mat-label>Select Flow type</mat-label>

                  <mat-select matNativeControl [(ngModel)]="selected.flow_type">
                    <mat-option value="Follow Up"> Follow Up </mat-option>
                    <mat-option value="Fresh">Fresh</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-6" *ngIf="ShowEmailTemplate">
                <mat-form-field style="height: 75px">
                  <mat-label>Select Email Type</mat-label>
                  <mat-select
                    matNativeControl
                    id="action"
                    name="action"
                    [(ngModel)]="selected.email_template_id"
                  >
                    <mat-option value="" disabled>Select an option</mat-option>
                    <mat-option
                      [value]="email.id"
                      *ngFor="let email of EmailTemplates"
                    >
                      {{ email.template_name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-6" *ngIf="ShowCallTemplate">
                <mat-form-field style="height: 75px">
                  <mat-label>Select Bot Type</mat-label>
                  <mat-select
                    matNativeControl
                    id="action"
                    name="action"
                    [(ngModel)]="selected.bot_id"
                  >
                    <mat-option
                      [value]="bot.id"
                      *ngFor="let bot of BotTemplates"
                    >
                      {{ bot.bot_name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-6" *ngIf="ShowSmsTemplate">
                <mat-form-field style="height: 75px">
                  <mat-label>Select Sms Template</mat-label>
                  <select
                    matNativeControl
                    id="action"
                    name="action"
                    [(ngModel)]="selected.sms_template_id"
                  >
                    <mat-option
                      [value]="sms.id"
                      *ngFor="let sms of SmsTemplates"
                    >
                      {{ sms.template_name }}
                    </mat-option>
                  </select>
                </mat-form-field>
              </div>

              <div class="col-sm-12 w-100">
                <mat-button-toggle-group
                  class="w-100"
                  name="fontStyle"
                  aria-label="Font Style"
                >
                  <mat-button-toggle
                    class="w-100"
                    value="Immediety"
                    (click)="tabToggle('immediate')"
                    >immediately
                  </mat-button-toggle>
                  <mat-button-toggle
                    class="w-100"
                    value="Time"
                    (click)="tabToggle('interval')"
                    >at a relative time period</mat-button-toggle
                  >
                  <mat-button-toggle
                    class="w-100"
                    value="Calender"
                    (click)="tabToggle('date')"
                    >Specific date/time
                  </mat-button-toggle>
                </mat-button-toggle-group>
              </div>

              <div class="col mt-4" *ngIf="showTab == 'immediate'">
                <div class="row">
                  <div class="form-group col-xs-12">
                    <div class="input-group"></div>
                  </div>
                </div>
              </div>

              <div class="col-12 mt-4" *ngIf="showTab == 'interval'">
                <div class="row">
                  <div class="col-md-6">
                    <div>
                      <mat-form-field style="height: 75px">
                        <mat-label>Action schedule on</mat-label>
                        <mat-select
                          matNativeControl
                          id="action"
                          name="action"
                          [(ngModel)]="selected.trigger_interval_unit"
                          (ngModelChange)="HandleOnChangeInterval()"
                        >
                          <mat-option value="minute">minute(s)</mat-option>
                          <mat-option value="hour">hour(s)</mat-option>
                          <mat-option value="day" selected="selected">
                            day(s)
                          </mat-option>
                          <mat-option value="month">month(s)</mat-option>
                          <mat-option value="year">year(s)</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="col-md-6" *ngIf="ShowMinutesDropDown">
                    <mat-form-field style="height: 75px">
                      <mat-label>Minutes</mat-label>
                      <mat-select
                        matNativeControl
                        id="action"
                        name="action"
                        [(ngModel)]="selected.trigger_interval"
                      >
                        <mat-option>15 Min</mat-option>
                        <mat-option>30 Min</mat-option>
                        <mat-option>45 Min</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <div class="col-md-6" *ngIf="ShowHourDropDown">
                    <mat-form-field style="height: 75px">
                      <mat-label>Hours</mat-label>
                      <mat-select
                        matNativeControl
                        id="action"
                        name="action"
                        [(ngModel)]="selected.trigger_interval"
                      >
                        <mat-option>1 Hour</mat-option>
                        <mat-option>2 Hours</mat-option>
                        <mat-option>6 Hours</mat-option>
                        <mat-option>12 Hours</mat-option>
                        <mat-option>18 Hours</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <div class="col-md-6" *ngIf="ShowDayDropDown">
                    <mat-form-field style="height: 75px">
                      <mat-label>Days</mat-label>
                      <mat-select
                        matNativeControl
                        id="action"
                        name="action"
                        [(ngModel)]="selected.trigger_interval"
                      >
                        <mat-option>1 Day</mat-option>
                        <mat-option>2 Days</mat-option>
                        <mat-option>6 Days</mat-option>
                        <mat-option>12 Days</mat-option>
                        <mat-option>18 Days</mat-option>
                        <mat-option>24 Days</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <div class="col-md-6" *ngIf="ShowMonthDropDown">
                    <mat-form-field style="height: 75px">
                      <mat-label>Months</mat-label>
                      <mat-select
                        matNativeControl
                        id="action"
                        name="action"
                        [(ngModel)]="selected.trigger_interval"
                      >
                        <mat-option>1 Month</mat-option>
                        <mat-option>2 Months</mat-option>
                        <mat-option>4 Months</mat-option>
                        <mat-option>8 Months</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <div class="col-md-6" *ngIf="ShowYearDropDown">
                    <mat-form-field style="height: 75px">
                      <mat-label>Years</mat-label>
                      <mat-select
                        matNativeControl
                        id="action"
                        name="action"
                        [(ngModel)]="selected.sms_template_id"
                      >
                        <mat-option>1 year</mat-option>
                        <mat-option>2 years</mat-option>
                        <mat-option>3 years</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>
              </div>

              <div class="col-12 mt-4 w-100 mb-4" *ngIf="showTab == 'date'">
                <form [formGroup]="rangeForm">
                  <div class="input-group">
                    <input
                      type="date"
                      class="form-control"
                      formControlName="start"
                      placeholder="Start date"
                    />
                    <div class="input-group-append">
                      <span class="input-group-text">to</span>
                    </div>
                    <input
                      type="date"
                      class="form-control"
                      formControlName="end"
                      placeholder="End date"
                    />
                  </div>

                  <div
                    class="invalid-feedback"
                    *ngIf="rangeForm.get('start').hasError('required')"
                  >
                    Start date is required
                  </div>
                  <div
                    class="invalid-feedback"
                    *ngIf="rangeForm.get('end').hasError('required')"
                  >
                    End date is required
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <div
          class="row"
          style="
            margin-bottom: 20px;
            width: 350px;
            display: flex;
            justify-content: center;
            margin-left: auto;
            margin-right: auto;
          "
        >
          <div [ngClass]="{ 'col-md-4': SaveButton, 'col-md-1': !SaveButton }">
            <button
              *ngIf="SaveButton"
              class="btn"
              style="
                background-color: #a64eed;
                width: 100px;
                height: 35px;
                border-radius: 19px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                padding-right: 14px;
                padding-bottom: 10px;
              "
              (click)="SaveConditionFlow()"
              matDialogClose
            >
            <i class="fa-solid fa-save closedialog" style="margin-right: 5px; margin-bottom: 4px;" ></i>
              Save
            </button>
          </div>

          <div
            [ngClass]="{ 'col-md-4': SaveButton, 'col-md-6': !SaveButton }"
            *ngIf="UpdateButton"
          >
            <button
              class="btn"
              style="
                background-color: #a64eed;
                width: 100px;
                height: 35px;
                border-radius: 19px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                padding-right: 10px;
                padding-bottom: 10px;
              "
              (click)="UpdateConditionFlow()"
            >
              <div style="margin-right: 5px">
                <i class="fa-solid fa-save closedialog" matDialogClose></i>
              </div>
              Update
            </button>
          </div>

          <div [ngClass]="{ 'col-md-4': SaveButton, 'col-md-5': !SaveButton }">
            <button
              class="btn btndelete"
              type="button"
              class="btn btn-sm"
              data-bs-dismiss="modal"
              matDialogClose
              style="
                background-color: #a64eed;
                width: 100px;
                height: 35px;
                border-radius: 19px;
                display: flex;
                align-items: center;
                color: white;
                justify-content: center;
                padding-right: 13px;
                padding-bottom: 10px;
              "
            >
              <div style="margin-right: 5px">
                <i class="fa-solid fa-trash-alt closedialog" matDialogClose></i>
              </div>
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </mat-dialog-content>
</ng-template>

<ng-template #myCondition>
  <mat-dialog-content class="">
    <div class="modal-dialog" role="document" style="width: 500px">
      <div class="modal-content">
        <div
          class="modal-header"
          style="background-color: #ebe3f8; height: 80px; margin-top: 15px"
        >
          {{ campaign_id.id }}
          <div
            class="col-md-6 d-flex align-items-center justify-content-center"
          >
            <mat-form-field class="mt-3">
              <mat-label>Event Type</mat-label>
              <input
                type="text"
                autocomplete="off"
                name="type"
                matInput
                disabled
                [(ngModel)]="selected.event_type"
              />
            </mat-form-field>
          </div>

          <div
            class="col-md-6 d-flex align-items-center justify-content-center"
          >
            <mat-form-field class="mt-3 justify-content-center">
              <mat-label>Event Order</mat-label>
              <input
                type="text"
                autocomplete="off"
                class="rounded-circle"
                style="
                  position: absolute;
                  height: 22px;
                  width: 22px;
                  background-color: #a64eed;
                  border-radius: 45%;
                  text-align: center;
                  color: white;
                  /* display: inline-block; */
                "
                name="event_order"
                disabled
                matInput
                [(ngModel)]="selected.event_order"
              />
            </mat-form-field>
          </div>
        </div>
        <div
          class="modal-body"
          *ngIf="selected.event_type == 'condition'"
          style="margin-top: 15px"
        >
          <div class="row">
            <div class="col-md-6">
              <mat-form-field style="height: 75px">
                <mat-label>Event name</mat-label>
                <input
                  maxlength="18"
                  type="text"
                  autocomplete="off"
                  name="event_name"
                  matInput
                  [(ngModel)]="selected.event_name"
                  required
                />
              </mat-form-field>
            </div>

            <div class="col-md-6">
              <mat-form-field style="height: 75px">
                <mat-label>Candidate Status:</mat-label>
                <mat-select
                  matNativeControl
                  id="action"
                  name="action"
                  [(ngModel)]="selected.candidate_status_id"
                >
                  <mat-option
                    *ngFor="let status of CandidateStatus"
                    [value]="status.id"
                  >
                    {{ status.display_name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div
          class="modal-footer action mx-auto d-block"
          *ngIf="selected.event_type"
        >
          <div
            class="row"
            style="
              margin-bottom: 20px;
              width: 350px;
              display: flex;
              justify-content: center;
              margin-left: auto;
              margin-right: auto;
            "
          >
            <div [ngClass]="{ 'col-md-4': SaveButton, 'col-md-5': !SaveButton }" *ngIf="SaveButton">
              <button
                class="btn"
                style="
                  background-color: #a64eed;
                  width: 100px;
                  height: 35px;
                  border-radius: 19px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  color: white;
                  padding-right: 14px;
                  padding-bottom: 10px;
                "
                (click)="SaveConditionFlow()"
                matDialogClose
              >
              <i class="fa-solid fa-save closedialog" style="margin-right: 5px; margin-bottom: 4px;" ></i>
                <!-- <div style="margin-right: 5px">
                  <i class="fa-solid fa-save closedialog" matDialogClose></i>
                </div> -->
                Save
              </button>
            </div>

            <div [ngClass]="{ 'col-md-4': SaveButton, 'col-md-6': !SaveButton }" *ngIf="UpdateButton">
              <button
                class="btn"
                style="
                  background-color: #a64eed;
                  width: 100px;
                  height: 35px;
                  border-radius: 19px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  color: white;
                  padding-right: 10px;
                  padding-bottom: 10px;
                "
                (click)="UpdateConditionFlow()"
              >
                <div style="margin-right: 5px">
                  <i class="fa-solid fa-save closedialog" matDialogClose></i>
                </div>
                Update
              </button>
            </div>

            <div [ngClass]="{ 'col-md-4': SaveButton, 'col-md-5': !SaveButton }">
              <button
                class="btn btndelete"
                type="button"
                class="btn btn-sm"
                data-bs-dismiss="modal"
                matDialogClose
                style="
                  background-color: #a64eed;
                  width: 100px;
                  height: 35px;
                  border-radius: 19px;
                  display: flex;
                  align-items: center;
                  color: white;
                  justify-content: center;
                  padding-right: 13px;
                  padding-bottom: 10px;
                "
              >
                <div style="margin-right: 5px">
                  <i
                    class="fa-solid fa-trash-alt closedialog"
                    matDialogClose
                  ></i>
                </div>
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </mat-dialog-content>
</ng-template>

<!-- <div class="modal "   id="event-model" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content ">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 " *ngIf="selected.event_type == 'action' || selected.event_type == '' || selected.event_type == 'start'">
                        <div class="containerexpand " id="315" style="width:auto">
                            <div class="card mt-4" style="height: 263px;">
                                <div style="display: inline; background: #ffff00; height: 40px; border-radius: 4px;"
                                    class="Desicion card-header"> condition </div>
                                <div style="display: inline; background: #388E3C; color: #fff; height: 40px; border-radius: 4px; text-align: center; line-height: 40px; font-weight: bold;"
                                    class="action card-header">Condition</div>

                                <div class="card-body">
                                    <blockquote class="blockquote mb-0" style="font-size: 14px;">
                                        Navigate through the options and pinpoint the exact condition that will act as
                                        the catalyst for a cascade of actions. Your selection holds the power to shape
                                        the course of events.
                                    </blockquote>

                                </div>

                            </div>
                            <button type="button" class="ml-4 col-md-4 btn btn-sm btn-outline-warning"
                                style="color: #388E3C; border-color: #388E3C; position:absolute;left:50px;top:-50px"
                                (click)="AddnewEvent('condition','#388E3C')">Select</button>
                        </div>
                    </div>

                    <div class="col-md-6"
                        *ngIf="selected.event_type == 'condition' || selected.event_type == 'action' || selected.event_type == '' || selected.event_type == 'start'"
                        style="position:absolute;left:50px">
                        <div style="width:auto" class="" id="480" style="width:auto">
                            <div class="card mt-4 hideit" style="height: 263px;">
                                <div style="display: inline; background: #00FF00; height: 40px; border-radius: 4px;"
                                    class="action card-header"> Action </div>
                                <div style="display: inline; background: #4527A0; color:#fff; height: 40px; border-radius: 4px; text-align: center; line-height: 40px; font-weight: bold;"
                                    class="action card-header">Action</div>

                                <div class="card-body">
                                    <blockquote class="blockquote mb-0" style="font-size: 14px;">
                                       
                                        Casting your influence over the situation, pick an action that perfectly aligns
                                        with the presented condition. Your choice will guide the path forward, so select
                                        with purpose.
                                    </blockquote>

                                </div>

                            </div>
                            <button type="button" (click)="AddnewEvent('action','#4527A0')"
                                class="ml-4  btn btn-sm  col-md-4  btn-outline-warning"
                                style="color: #4527A0; border-color: #4527A0; position:absolute;left:50px;top:-50px">Select</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> -->

<!-- <div class="modal model-sm" id="condition-model" tabindex="-1" data-bs-backdrop="static" tabindex="-1" role="dialog"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header"
                style="background-color: #ebe3f8;padding-top: 0px;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;">
                {{campaign_id.id}}
                <div class="col-md-8">
                    <mat-form-field class="mt-3 mr-4">
                        <mat-label>Event Type</mat-label>
                        <input type="text" autocomplete="off" name="type" matInput disabled
                            [(ngModel)]="selected.event_type">
                    </mat-form-field>
                </div>
                <div class="col-md-4 ">
                    <h6 style="text-align: center;margin-top:14px"> Event Order </h6>
                    <input type="text" autocomplete="off" class="rounded-circle"
                        style="position: absolute; left: 145px; top: 17px; height: 27px; width: 27px; background-color: #a64eed; border-radius: 45%; text-align: center; display: inline-block;"
                        name="event_order" disabled matInput [(ngModel)]="selected.event_order">
                </div>

            </div>
            <div class="modal-body" *ngIf="selected.event_type == 'condition'">
                <div class="row">
                    <div class="col-md-6">
                        <mat-form-field class="w-100">
                            <mat-label>Event name</mat-label>
                            <input type="text" autocomplete="off" name="event_name" matInput
                                [(ngModel)]="selected.event_name">
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field class="w-100">
                            <mat-label>Candidate Status:</mat-label>
                            <mat-select matNativeControl id="action" name="action"
                                [(ngModel)]="selected.candidate_status_id">
                                <mat-option *ngFor="let status of candidateStatus"
                                    [value]='status.id'>{{status.display_name}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                </div>

            </div>
            <div class="modal-footer action mx-auto d-block" *ngIf="selected.event_type">

                <button *ngIf="!selected.id" class="btn "
                    style="background-color: #a64eed;width:130px;border-radius: 19px;" (click)="SaveConditionFlow()">
                    Save</button>
                <button *ngIf="selected.id" class="btn "
                    style="background-color: #a64eed;width:130px;border-radius: 19px;" (click)="UpdateConditionFlow()">
                    Update</button>

                <button class="btn btndelete " style="background-color: #a64eed;width:130px;border-radius: 19px;"
                    (click)="CloseModal('#condition-model')">Cancel</button>

                <div class="action mt-4" *ngIf="selected.event_type">

                </div>

            </div>

        </div>
    </div>
</div> -->

<!-- <div
  class="modal model-sm"
  id="action-model"
  tabindex="-1"
  data-bs-backdrop="static"
  tabindex="-1"
  role="dialog"
  aria-labelledby="staticBackdropLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div
        class="modal-header"
        style="
          background-color: #ebe3f8;
          padding-top: 0px;
          padding-bottom: 0px;
          padding-left: 0px;
          padding-right: 0px;
        "
      >
        {{ campaign_id.id }}
        <div class="col-md-8">
          <mat-form-field class="mt-3 mr-4">
            <mat-label>Event Type</mat-label>
            <input
              type="text"
              autocomplete="off"
              name="type"
              matInput
              disabled
              [(ngModel)]="selected.event_type"
            />
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <h6 style="text-align: center; margin-top: 14px">Event Order</h6>
          <input
            type="text"
            autocomplete="off"
            class="rounded-circle"
            style="
              position: absolute;
              left: 145px;
              top: 17px;
              height: 27px;
              width: 27px;
              background-color: #a64eed;
              border-radius: 45%;
              text-align: center;
              display: inline-block;
            "
            name="event_order"
            disabled
            matInput
            [(ngModel)]="selected.event_order"
          />
        </div>
      </div>
      <div class="modal-body">
        <div
          class="container-fluid"
          *ngIf="selected.event_type == 'action'"
          style="padding-right: 0px; padding-left: 0px"
        >
          <div class="row">
            <div class="col-md-6">
              <mat-form-field class="w-100">
                <mat-label>Event name</mat-label>
                <input
                  type="text"
                  autocomplete="off"
                  name="event_name"
                  matInput
                  [(ngModel)]="selected.event_name"
                  required
                />
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field class="w-100">
                <mat-label>Select Channel:</mat-label>
                <mat-select
                  matNativeControl
                  id="event"
                  name="event"
                  [(ngModel)]="selected.channel_id"
                >
                  <mat-option
                    *ngFor="let channel of campaignChannels"
                    [value]="channel.id"
                    (click)="getChannelDetail()"
                    >{{ channel.channel_name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>

            <div class="col-md-6">
              <mat-form-field class="w-100">
                <mat-label>Select Flow Type:</mat-label>
                <mat-select
                  matNativeControl
                  id="event"
                  name="event"
                  [(ngModel)]="selected.flow_type"
                >
                  <mat-option value="Fresh" (click)="getFlowType()"
                    >Fresh</mat-option
                  >
                  <mat-option value="Flow-up" (click)="getFlowType()"
                    >Flow-up</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field class="w-100">
                <mat-label>{{ temp_detail }}</mat-label>
                <mat-select
                  matNativeControl
                  id="action"
                  name="action"
                  [(ngModel)]="selected.temp_id"
                >
                  <mat-option
                    *ngFor="let item of campaignChannelsData"
                    [value]="item.id"
                  >
                    {{ item.name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>

            <div class="col-md-6" *ngIf="is_sms_templates">
              <mat-form-field class="w-100">
                <mat-label>Select SMS Templates:</mat-label>
                <mat-select
                  matNativeControl
                  id="action"
                  name="action"
                  [(ngModel)]="selected.sms_template_id"
                >
                  <mat-option
                    *ngFor="let item of sms_template"
                    [value]="item.id"
                  >
                    {{ item.name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>

            <div class="col-md-6" *ngIf="is_email_templates">
              <mat-form-field class="w-100">
                <mat-label>Select Email Template:</mat-label>
                <mat-select
                  matNativeControl
                  id="action"
                  name="action"
                  [(ngModel)]="selected.email_template_id"
                >
                  <mat-option
                    *ngFor="let item of email_template"
                    [value]="item.id"
                  >
                    {{ item.name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>

            <div class="col-md-6" *ngIf="is_bot_data">
              <mat-form-field class="w-100">
                <mat-label>Select Bot:</mat-label>
                <mat-select
                  matNativeControl
                  id="action"
                  name="action"
                  [(ngModel)]="selected.bot_id"
                >
                  <mat-option *ngFor="let item of Bot_data" [value]="item.id">
                    {{ item.name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="row" *ngIf="selected.event_type == 'action'">
          <div class="col-sm-12 w-100">
            <mat-button-toggle-group
              class="w-100"
              name="fontStyle"
              aria-label="Font Style"
            >
              <mat-button-toggle
                class="w-100"
                value="Immediety"
                (click)="tabToggle('immediate')"
                >immediately
              </mat-button-toggle>
              <mat-button-toggle
                class="w-100"
                value="Time"
                (click)="tabToggle('interval')"
                >at a relative time period</mat-button-toggle
              >
              <mat-button-toggle
                class="w-100"
                value="Calender"
                (click)="tabToggle('date')"
                >Specific date/time
              </mat-button-toggle>
            </mat-button-toggle-group>
          </div>

          <div class="col-sm-4 mt-4" *ngIf="showTab == 'immediate'">
            <div class="row">
              <div class="form-group col-xs-12">
                <div class="input-group"></div>
              </div>
            </div>
          </div>
          <div class="col-12 mt-4" *ngIf="showTab == 'interval'">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <div class="input-group">
                    <mat-form-field class="w-100">
                      <mat-label>Trigge Interval</mat-label>
                      <input
                        type="text"
                        autocomplete="off"
                        name="trigger_interval"
                        matInput
                        [(ngModel)]="selected.trigger_interval"
                      />
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div>
                  <mat-form-field class="w-100">
                    <mat-label>action schedule On</mat-label>
                    <mat-select
                      matNativeControl
                      id="action"
                      name="action"
                      [(ngModel)]="selected.trigger_interval_unit"
                    >
                      <mat-option value="i">minute(s)</mat-option>
                      <mat-option value="h">hour(s)</mat-option>
                      <mat-option value="d" selected="selected"
                        >day(s)
                      </mat-option>
                      <mat-option value="m">month(s)</mat-option>
                      <mat-option value="y">year(s)</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>

          <div class="col-12 mt-4 w-100" *ngIf="showTab == 'date'">
            <mat-form-field class="w-100">
              <mat-label>Enter a date range</mat-label>
              <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
                <input
                  matStartDate
                  formControlName="start"
                  placeholder="Start date"
                />
                <input
                  matEndDate
                  formControlName="end"
                  placeholder="End date"
                />
              </mat-date-range-input>
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-date-range-picker #picker></mat-date-range-picker>

              <mat-error
                *ngIf="range.controls['start'].hasError('matStartDateInvalid')"
                >Invalid start date
              </mat-error>
              <mat-error
                *ngIf="range.controls['end'].hasError('matEndDateInvalid')"
                >Invalid end date
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div
        class="modal-footer action mx-auto d-block"
        *ngIf="selected.event_type"
      >
        <button
          *ngIf="!selected.id"
          class="btn"
          style="background-color: #a64eed; width: 130px; border-radius: 19px"
          (click)="SaveConditionFlow()"
        >
          Save
        </button>
        <button
          *ngIf="selected.id"
          class="btn"
          style="background-color: #a64eed; width: 130px; border-radius: 19px"
          (click)="UpdateConditionFlow()"
        >
          Update
        </button>

        <button
          class="btn btndelete"
          style="background-color: #a64eed; width: 130px; border-radius: 19px"
          (click)="CloseModal('#action-model')"
        >
          Cancel
        </button>

        <div class="action mt-4" *ngIf="selected.event_type"></div>
      </div>
    </div>
  </div>
</div> -->
